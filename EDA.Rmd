---
title: "EDA"
author: "Beibei Du, Wafiakmal Miftah, Suzanna Thompson, Alisa Tian"
date: "`r Sys.Date()`"
output: 
  pdf_document: default
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(kableExtra)
library(psych)
library(ggplot2)
options(scipen=999)
```
# IDS702 Final Project EDA

## 1. Data Overview
The data used in this project comes from Kaggle with 969 observation with 11 variables. This dataset has no null or missing value. This is the link to original post: [\textcolor{blue}{Data Science Job Salaries}](https://www.kaggle.com/datasets/ruchi798/data-science-job-salaries)

The variables in this dataset are:
\renewcommand{\arraystretch}{1.5}
```{r echo = FALSE, results='asis'}
desc <- read.csv('description.csv')
kable(desc, caption="Variable Names and Description", format='latex') %>%
  kable_styling(latex_options = c("striped", "hold_position", "scale_down"))
```

For one of our research questions we choose the outcome variable to be salary_in_usd to ensure all the data is converted to the same unit (usd). As shown by the table below, that there are other currency in this dataset.
\renewcommand{\arraystretch}{1.25}
```{r echo = FALSE, results='asis'}
df <- read.csv('ds_salaries.csv')
temp <- c('salary_currency','salary','salary_in_usd')
df1 <- df[temp]
kable(head(df1), caption="Salary Variable vs Salary in USD Variable") %>%
  kable_styling(latex_options = c(font_size=11,"striped", "hold_position"))
```
We choose salary_in_usd over similar columns, salary and salary_currency, in order to standardize our outcome variable and reduce noise and colinearity.

\newpage

### 1.2 Two proposed research questions
1. Which factors are associated with an increase in salary for data science jobs? (Continuous outcome)
2. How do company size, company location, employment type, employee residence and job title affected the remote work ratio of a data scientist? (Discrete outcome) For this question, there are three possible values for the remote work ratio, 0, 50, and 100; these signify an in-person job, a hybrid job, and a fully remote job, respectively. 

## 2. Primary relationship of interest
Table 3 below is showing the descriptive statistic for each variable. Variable with asterisks are categorical variable that needs to be look into further in model building.

```{r echo = FALSE, results='asis'}
#kable(describe(df), caption="Summary of the DS Salary Dataset", digits=2) %>%
#  kable_styling(latex_options = c(font_size=11,"striped", "hold_position", "scale_down"))
```

### 2.1. Descriptive stats and plots Answering question 1

In trying find the variable that potentially has statistical relationship with the outcome variable, we can plot each variable with salary_in_usd:

```{r echo=FALSE, message=FALSE, fig.width=4, fig.height=4, fig.align='center'}
ggplot(df, aes(x="", y=experience_level, fill=experience_level)) +
  geom_bar(stat="identity", width=1) +
  coord_polar("y", start=0) +
  theme_void()
```
```{r echo=FALSE, message=FALSE, fig.width=4, fig.height=4, fig.align='center'}
par(mfrow=c(1,3))
ggplot(df, aes(experience_level, ..count..)) +
  geom_bar(aes(fill=remote_ratio), position="dodge")
```

```{r echo=FALSE, message=FALSE, fig.width=10, fig.height=8, fig.align='center'}
par(mfrow=c(2,2))
boxplot(salary_in_usd~remote_ratio, data=df, horizontal = TRUE)
boxplot(salary_in_usd~company_location, data=df, horizontal = TRUE)
#hist(df$company_size)#, data=df)#, horizontal = TRUE)
```
```{r echo=FALSE, message=FALSE, fig.width=10, fig.height=8, fig.align='center'}
par(mfrow=c(2,2))
boxplot(salary_in_usd~experience_level, data=df, horizontal = TRUE)
boxplot(salary_in_usd~employment_type, data=df, horizontal = TRUE)
boxplot(salary_in_usd~job_title, data=df, horizontal = TRUE)
boxplot(salary_in_usd~employee_residence, data=df, horizontal = TRUE)
```


### 2.2. Descriptive stats and plots Answering question 2

## 3. Other characteristics
Our dataset includes work_year, which is the year that the data was collected. This variables contains three unique values, 2020, 2021, and 2022, which contain 11.86%, 35.75%, and 52.39% respectively. Similarly, job_title has 50 unique values. Below is a table showing the unique values in the variable and their respective counts.

```{r echo = FALSE}
table(df$job_title)
```
From this table, we can see that the job titles related to data science are not in short supply. 
Furthermore, company_location has 50 unique values and employee_residence has 57 unique values. They are each listed below. 

```{r echo = FALSE}
table(df$employee_residence)
```
```{r echo = FALSE}
table(df$company_location)
```
The company_size variable is also of note: it has three potential variables, S for small, M for medium, and L for large. Its distribution of counts is listed below. 
```{r echo = FALSE}
table(df$company_size)
```

### 

## 4. Potential challenges
A challenge we'll need to address before modeling is the amount of job titles that are present in our data. To solve this, we will either collaspe certain job titles into relevant categories or exclude job titles based on some metric. In that, if the job title "NLP Engineer" only shows up once, we may decide to drop it and all other job titles with similar counts. This decision will be informed by domain knowledge and field experts. 
We face a similar problem with employee_residence and company_location. Not only is more than half of our data from the United States, Great Britian, and Canada, but the two variables are also highly correlated. Because we're investigating the relationship between work place attributes and the remote-ratio, we will include both location-based variables. 
There are various common data issues that need to be addressed before modeling. We consider them below. 
Messy data is defined to be a dataset where values are unstandardized, unorganized, or bias. Largely, our data is clean. The only potential messiness in our data comes from the large number of job titles as mentioned above. 
Another common data issue is a lack of data. As our data has 607 entries, we do not face this problem. 
Finally, confounding variables can cause modeling issues as there may be variables that are related to our questions at hand that are not present in our data. Because our research questions are somewhat poignant in their phrasing, we will not encounter this as a data issue. One might suppose that a level of education may have an effect on a data scientist's salary as it tends to have an effect in other fields. However, because data science is a relatively new field, there are not much data on whether or not a higher-education degree has an effect on the ensuing salary. For this reason, we find no issue in assuming it has marginal effect.
