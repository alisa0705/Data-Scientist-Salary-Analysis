---
title: "EDA"
author: "Beibei Du, Wafiakmal Miftah, Suzanna Thompson, Alisa Tian"
date: "`r Sys.Date()`"
output: 
  pdf_document: default
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(kableExtra)
library(psych)
library(ggplot2)
library(ggpubr)
options(scipen=999)
```
# IDS702 Final Project EDA

## 1. Data Overview
The data used in this project comes from Kaggle with 969 observation with 11 variables. This dataset has no null or missing value. This is the link to original post: [\textcolor{blue}{Data Science Job Salaries}](https://www.kaggle.com/datasets/ruchi798/data-science-job-salaries)

The variables in this dataset are:
\renewcommand{\arraystretch}{1.5}
```{r echo = FALSE, results='asis'}
desc <- read.csv('description.csv')
kable(desc, caption="Variable Names and Description", format='latex') %>%
  kable_styling(latex_options = c("striped", "hold_position", "scale_down"))
```

Our outcome variable is salary_in_usd to ensure all the data is converted to the same unit (usd). As shown by the table below, that there are other currency in this dataset.
\renewcommand{\arraystretch}{1.25}
```{r echo = FALSE, results='asis'}
df <- read.csv('ds_salaries.csv')
temp <- c('salary_currency','salary','salary_in_usd')
df1 <- df[temp]
kable(head(df1), caption="Salary Variable vs Salary in USD Variable") %>%
  kable_styling(latex_options = c(font_size=11,"striped", "hold_position"))
```

\newpage

### 1.2 Two proposed research questions
1. Which factors are associated with an increase in salary for data science jobs? (Continuous outcome)
2. How do company size, company location, employment type, employee residence and job title affected the remote work ratio of a data scientist? (Discrete outcome)

## 2. Primary relationship of interest
Table 3 below is showing the descriptive statistic for each variable. Variable with asterisks are categorical variable that needs to be look into further in model building.

```{r echo = FALSE, results='asis'}
kable(describe(df), caption="Summary of the DS Salary Dataset", digits=2) %>%
  kable_styling(latex_options = c(font_size=11,"striped", "hold_position", "scale_down"))
```

### 2.1. Descriptive stats and plots Answering question 1

Our first outcome variable, salary in USD, ranged from USD2,859 to USD600,000. Diving into each variable, the majority of the respondents are Senior Level employee (46%), which majority working fully remote (71%), full in office (19%), or hybrid (10%). Most of the Senior Level employee works in medium size companies (66%), while the rest are working in large companies (26%) or small companies (8%). Most of their employment status are Full-Time (99%), while the rest are Contracts or Freelance. None of them are Part-Time employee. 
The second biggest respondents are Mid/Intermediate Level employee (35%), which majority working fully remote (54%), full in office (26%), or hybrid (20%). Most of the Mid/Intermediate Level employee works in medium size companies (46%), while the rest are working in large companies (40%) or small companies (14%). Most of their employment status are Full-Time (97%), while the rest are Contracts, Freelance, or Part-Time employee.
The remaining respondents are Entry/Junior Level employee (15%) and Executive/Director level (4%).

There are 50 different company location, which mostly in the US (58%), followed by Great Britain (8%), Canada (5%), and the rest of the world. While the employee residence data shows that respondents live in 57 different country, probably made possible by the ability to work remotely. Most of the respondents lived in the US (55%), followed by Great Britain (7%), India (5%), and the rest of the world. There are 50 different job titles in this dataset, but all of them are in the field of data science. The job title variable is dominated by data scientist (24%), data engineer (22%), data analyst (16%), while the rest are varied but mostly have "engineer" or "data" in the title. Based on the barplot shown below, there are certain pattern from Remote Ratio, Company Size and Experience level when plotted against salary (in USD)

```{r include = TRUE, echo=FALSE ,message=FALSE, fig.width=6, fig.height=5, fig.align='center'}
par(mfrow=c(2,2))
e <- ggplot(df, aes(x = salary_in_usd)) + 
  geom_histogram(binwidth = 50000, fill="#69b3a2", color="#e9ecef", alpha=0.9) +
  ggtitle("Histogram of Salary (in USD)") +
#  facet_wrap(~company_size) +
  theme(legend.position="none",axis.title = element_text(size = 8), plot.title = element_text(size=10,face="bold"))
f <- ggplot(df, aes(x = salary_in_usd)) + 
  geom_histogram(binwidth = 50000, fill="#69b3a2", color="#e9ecef", alpha=0.9) +
  ggtitle("Salary (in USD) vs Remote Ratio") +
  facet_wrap(~remote_ratio) +
  theme(legend.position="none",axis.text.x = element_text(size = 4), axis.title = element_text(size = 8), plot.title = element_text(size=10,face="bold"))
g <- ggplot(df, aes(x = salary_in_usd)) + 
  geom_histogram(binwidth = 50000, fill="#69b3a2", color="#e9ecef", alpha=0.9) +
  ggtitle("Salary (in USD) vs Company Size") +
  facet_wrap(~company_size) +
  theme(legend.position="none",axis.text.x = element_text(size = 4),axis.title = element_text(size = 8), plot.title = element_text(size=10,face="bold"))
h <- ggplot(df, aes(x = salary_in_usd)) + 
  geom_histogram(binwidth = 50000, fill="#69b3a2", color="#e9ecef", alpha=0.9) +
  ggtitle("Salary (in USD) vs Experience Level") +
  facet_wrap(~experience_level) +
  theme(legend.position="none",axis.text.x = element_text(size = 5),axis.title = element_text(size = 8), plot.title = element_text(size=10,face="bold"))

figure1 <- ggarrange(e,f,g,h,
                    ncol=2, nrow=2)
figure1
```

```{r include=FALSE, echo=FALSE ,message=FALSE, fig.width=6, fig.height=5, fig.align='center'}
# PLEASE READ
# This is a different code to show range of salaries based on different filters, need your input which one should be included
# This code is currently not included in the pdf output, but you can still run it if you want to see the result
# To run it, please change include = FALSE to include = TRUE
par(mfrow=c(2,2))
a <- ggplot(df, aes(company_size)) + 
  geom_bar(aes(fill=experience_level)) +
  ggtitle("Exp Level vs Company Size") +
  facet_wrap(~experience_level) +
  theme(legend.position="none", axis.title = element_text(size = 8),plot.title = element_text(size=10,face="bold"))
b <- ggplot(df, aes(remote_ratio)) + 
  geom_bar(aes(fill=experience_level)) +
  ggtitle("Exp Level vs Remote Ratio") + 
  facet_wrap(~experience_level) +
  theme(legend.position="none", axis.title = element_text(size = 8),plot.title = element_text(size=10,face="bold"))
c <- ggplot(df, aes(employment_type)) + 
  geom_bar(aes(fill=experience_level)) +
  ggtitle("Exp Level vs Empl. Type") + 
  facet_wrap(~experience_level) +
  theme(legend.position="none",axis.title = element_text(size = 8), plot.title = element_text(size=10,face="bold"))
d <- ggplot(df, aes(x = salary_in_usd)) + 
  geom_histogram(binwidth = 50000, fill="#69b3a2", color="#e9ecef", alpha=0.9) +
  ggtitle("Histogram of Salary in USD") +
#  facet_wrap(~company_size) +
  theme(legend.position="none",axis.title = element_text(size = 8), plot.title = element_text(size=10,face="bold"))

figure <- ggarrange(a,b,c,d,
                    ncol=2, nrow=2)
figure

```



### 2.2. Descriptive stats and plots Answering question 2

## 3. Other characteristics
Briefly describe other variables in the data. If there are many, do not list them all. Rather, describe the types of variables that are present (e.g., “demographic information”).

### 

## 4. Potential challenges
Describe aspects of the data that may present challenges in the modeling stage. For example, might certain categorical variables need to be collapsed? Is there a lot of missingness? Could the size of the dataset present model selection challenges?